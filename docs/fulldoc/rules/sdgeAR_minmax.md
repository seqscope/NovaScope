# Rule `sdgeAR_minmax`:

## Purpose
Create a meta file containing the X and Y coordinates for a raw SGE matrix generated by Rule [`sdgeAR_reformat`](./sdgeAR_reformat.md). For a filtered SGE matrix, this meta file will be produced by Rule [`sdgeAR_polygonfilter`](./sdgeAR_polygonfilter.md) and is likely to be used in downstream analysis. Therefore, this rule ensures that a coordinate meta file is available for the raw SGE matrix.

## Input Files
* **A SGE in FICTURE-compatible Format**
A transcript-indexed SGE in the FICTURE format, which is generated by Rule [`sdgeAR_reformat`](./sdgeAR_reformat.md).

## Output Files
The rule generates the following output in the specified directory path:
```
<output_directory>/analysis/<run_id>/<unit_id>/preprocess
```


### (1) A Metadata File for X Y Coordinates
**Description**: This file contains the minimum and maximum X Y coordinates for the raw SGE matrix.

**File Naming Convention**:
```
<unit_id>.<solo_feature>.raw.coordinate_minmax.tsv
```
* `<solo_feature>`: Genomic feature.

**File Format**:
```
xmin	-27.973391144511698
xmax	8699.068916753664
ymin	-26.25
ymax	5144.932078838597
```
- `xmin`: The minimum x-coordinate in micrometers across all barcodes in the raw SGE matrix.
- `xmax`: The maximum x-coordinate in micrometers across all barcodes in the raw SGE matrix.
- `ymin`: The minimum y-coordinate in micrometers across all barcodes in the raw SGE matrix.
- `ymax`: The maximum y-coordinate in micrometers across all barcodes in the raw SGE matrix.

## Output Guidelines
The output file could be used as the input for [FICTURE](https://seqscope.github.io/ficture/).

## Parameters
No additional parameter is applied in this rule.

## Dependencies

Rule `sdgeAR_minmax` executes only after `sdge2sdgeAR` and its prerequisites are completed. See the [Workflow Structure](../../home/workflow_structure.md) for dependencies.

## Code Snippet
The code for this rule is provided in [`c03_sdgeAR_minmax.smk`](https://github.com/seqscope/NovaScope/blob/main/rules/c03_sdgeAR_minmax.smk).
